<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>Browse Topics â€” Skill Central</title>
    <link rel="stylesheet" href="assets/styles.css" />
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234f9ef5'><path d='M4 19.5A2.5 2.5 0 0 1 6.5 17H20'/><path d='M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z'/></svg>" />
    <style>
      body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Verdana, sans-serif; background: linear-gradient(180deg, rgba(13, 17, 23, 1) 0%, rgba(15, 19, 25, 0.98) 100%); color: #e6edf3; min-height: 100vh; }
      .browse-container { max-width: 1200px; margin: 0 auto; padding: 2rem; }
      .browse-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 3rem; padding-bottom: 2rem; border-bottom: 1px solid rgba(48, 54, 61, 0.4); }
      .browse-header h1 { margin: 0; font-size: 2rem; color: #79c0ff; }
      .back-btn { background: linear-gradient(135deg, #58a6ff 0%, #1f6feb 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; transition: all 0.3s ease; }
      .back-btn:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(88, 166, 255, 0.3); }
      .topics-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 2rem; }
      .topic-card { background: linear-gradient(135deg, rgba(30, 30, 30, 0.8) 0%, rgba(40, 40, 40, 0.6) 100%); border: 1px solid rgba(48, 54, 61, 0.4); border-radius: 12px; overflow: hidden; transition: all 0.3s ease; cursor: pointer; backdrop-filter: blur(15px); }
      .topic-card:hover { transform: translateY(-8px); border-color: #79c0ff; box-shadow: 0 12px 30px rgba(121, 192, 255, 0.15); }
      .topic-image { width: 100%; height: 200px; object-fit: cover; background: linear-gradient(135deg, #79c0ff 0%, #58a6ff 100%); }
      .topic-content { padding: 1.5rem; }
      .topic-title { font-size: 1.2rem; font-weight: 700; color: #79c0ff; margin-bottom: 0.5rem; }
      .topic-desc { color: #8b949e; font-size: 0.9rem; margin-bottom: 1rem; line-height: 1.5; }
      .topic-stats { display: flex; gap: 1rem; margin-bottom: 1rem; font-size: 0.9rem; }
      .stat { display: flex; align-items: center; gap: 0.5rem; color: #8b949e; }
      .stat svg { width: 16px; height: 16px; }
      .btn-enroll { background: linear-gradient(135deg, #58a6ff 0%, #1f6feb 100%); color: white; border: none; padding: 0.75rem 1.5rem; border-radius: 8px; cursor: pointer; font-weight: 600; width: 100%; transition: all 0.3s ease; }
      .btn-enroll:hover { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(88, 166, 255, 0.3); }
      .empty-state { text-align: center; padding: 3rem; color: #8b949e; }
      .empty-state svg { width: 60px; height: 60px; margin-bottom: 1rem; opacity: 0.5; }
    </style>
  </head>
  <body>
    <div class="browse-container">
      <div class="browse-header">
        <h1>Available Topics</h1>
        <button class="back-btn" onclick="window.location.href='dashboard.html'">Back to Dashboard</button>
      </div>

      <div id="topics-grid" class="topics-grid"></div>
    </div>

    <script>
      // Check authentication (support sessionStorage)
      const currentUser = localStorage.getItem('currentUser') || sessionStorage.getItem('currentUser');
      if (!currentUser) {
        window.location.href = 'index.html';
      }

      function getTopics() {
        return JSON.parse(localStorage.getItem('topics') || '[]');
      }

      function renderTopics() {
        const topics = getTopics();
        const container = document.getElementById('topics-grid');

        if (topics.length === 0) {
          container.innerHTML = `
            <div style="grid-column: 1/-1;">
              <div class="empty-state">
                <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                  <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                </svg>
                <h2>No Topics Available</h2>
                <p>Check back soon for new learning topics!</p>
              </div>
            </div>
          `;
          return;
        }

        container.innerHTML = topics.map((topic, idx) => `
          <div class="topic-card" onclick="enrollTopic(${idx})">
            <img src="${topic.image}" alt="${topic.name}" class="topic-image" onerror="this.style.display='none'">
            <div class="topic-content">
              <div class="topic-title">${topic.name}</div>
              <div class="topic-desc">${topic.description}</div>
              <div class="topic-stats">
                <div class="stat">
                  <svg fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                    <path d="M4 19.5A2.5 2.5 0 0 1 6.5 17H20"></path>
                    <path d="M6.5 2H20v20H6.5A2.5 2.5 0 0 1 4 19.5v-15A2.5 2.5 0 0 1 6.5 2z"></path>
                  </svg>
                  ${((topic.subjects||[]).reduce((s,sub)=> s + (sub.lessons||[]).length,0))} lessons
                </div>
              </div>
              <button class="btn-enroll" onclick="event.stopPropagation(); enrollTopic(${idx})">Start Learning</button>
            </div>
          </div>
        `).join('');
      }

      function enrollTopic(idx) {
        const topics = getTopics();
        const topic = topics[idx];
        const enrolledTopics = JSON.parse(localStorage.getItem('enrolledTopics') || '[]');

        if (!enrolledTopics.includes(idx)) {
          enrolledTopics.push(idx);
          localStorage.setItem('enrolledTopics', JSON.stringify(enrolledTopics));
        }

        // Could show topic details or lessons here
        alert(`Started learning "${topic.name}"! Check your dashboard.`);
      }

      renderTopics();
    </script>
  </body>
</html>
